

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Hodgkin-Huxley Neuron Builder &mdash; cls-interactive 0.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/style.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/style.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
        <script src="../../../../_static/load_ga.js"></script>
        <script src="../../../../_static/collapse.js"></script>
        <script src="../../../../_static/banner.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Rebuild an existing single hippocampal cell model" href="../rebuild_existing/rebuild_scm.html" />
    <link rel="prev" title="Hippocampus" href="../hippocampus.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> cls-interactive
          

          
            
            <img src="../../../../_static/cls-banner.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hpc_status_monitor/hpc_status_monitor.html">HPC Status Monitor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../online_usecases.html">Online Use Cases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../trace_analysis/trace_analysis.html">Trace Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../morphology_analysis/morphology_analysis.html">Morphology Analysis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../single_cell_modeling.html">Single Cell Building</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../overview/overview.html">Overview</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../hippocampus.html">Hippocampus</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Hodgkin-Huxley Neuron Builder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rebuild_existing/rebuild_scm.html">Rebuild an existing single hippocampal cell model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build_scm_hbp/build_scm_hbp.html">Build your own single hippocampal cell model using HBP data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cerebellum/cerebellum.html">Cerebellum</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../single_cell_in_silico/single_cell_in_silico.html">Single Cell <em>In Silico</em> Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../small_circuit_in_silico_experiments/small_circuit_in_silico_experiments.html">Small Circuit <em>In Silico</em> Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../brain_area_circuit_in_silico_experiments/brain_area_circuit_in_silico_experiments.html">Brain area circuit <em>in silico</em> experiments</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">cls-interactive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../online_usecases.html">Online Use Cases</a> &raquo;</li>
        
          <li><a href="../../single_cell_modeling.html">Single Cell Building</a> &raquo;</li>
        
          <li><a href="../hippocampus.html">Hippocampus</a> &raquo;</li>
        
      <li>Hodgkin-Huxley Neuron Builder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/online_usecases/single_cell_modeling/hippocampus/p1_hh_neuron_builder/p1_hh_neuron_builder.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hodgkin-huxley-neuron-builder">
<span id="hh-neuron-builder"></span><h1>Hodgkin-Huxley Neuron Builder<a class="headerlink" href="#hodgkin-huxley-neuron-builder" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Hodgkin-Huxley Neuron Builder is a web-application that allows the user to
interactively go through the entire cell model building pipeline. The workflow
consists of three steps: 1) electrophysiological feature extraction from voltage
traces; 2) model parameter optimization; 3) <em>in silico</em> experiments using the
optimized model cell.</p>
<p>The user is provided with a friendly interface enabling to interact with both
the HBP Collaboratory storage and the High Performance Computing (HPC)
resources. The application has been built in a flexible way to allow the
user to enter the workflow at any desired step, by either interacting with HBP
resources or uploading his own files.</p>
<p>The web-application homepage (see figure below) allows the user to initiate a new
workflow or to select a workflow previously saved in the current Collab storage.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_home.png"><img alt="../../../../_images/hhnb_home.png" class="align-right" src="../../../../_images/hhnb_home.png" style="width: 800.2400000000001px; height: 384.16px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>After initiating a new workflow, the user is provided with two panels allowing
to go through the processes of “Cell Optimization” and “Single Cell Simulation”
respectively (see figure below).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_workflows.png"><img alt="../../../../_images/hhnb_workflows.png" class="align-right" src="../../../../_images/hhnb_workflows.png" style="width: 828.0px; height: 225.6px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="cell-optimization">
<h2>Cell Optimization<a class="headerlink" href="#cell-optimization" title="Permalink to this headline">¶</a></h2>
<p>The cell optimization is made up of two main steps: i) the feature extraction
and ii) the choice of the single cell model to be optimized. An additional
panel, the “Optimization settings” one, is provided for the insertion of the
optimization parameters (see figure below).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_opt_empty.png"><img alt="../../../../_images/hhnb_opt_empty.png" class="align-right" src="../../../../_images/hhnb_opt_empty.png" style="width: 565.2px; height: 582.3000000000001px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Feature extraction is performed through the Feature Extraction GUI web
application when clicking the “Extract features” button. This application
interacts with and is integrated into the Hodgkin Huxley Neuron Builder
framework (as shown in the figure below) and allows the user to extract
features of interest from a dataset of electrophysiological traces provided by
HBP or from data uploaded by the user himself. For a detailed explanation of the
Feature Extraction GUI, please refer to the dedicated page of this guidebook
(<a class="reference internal" href="../../../trace_analysis/efel_gui/efel_gui.html#efel-gui"><span class="std std-ref">Feature extraction</span></a>). Alternatively, the user can upload his own
<em>features.json</em> and <em>protocols.json</em> files through the “Upload files”
button.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_efelg_traces.png"><img alt="../../../../_images/hhnb_efelg_traces.png" class="align-right" src="../../../../_images/hhnb_efelg_traces.png" style="width: 795.2px; height: 338.8px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>The model to be optimized is chosen among a dataset displayed to the user
after clicking the “Choose from database” button. The dataset is made up of
<a class="reference external" href="https://www.neuron.yale.edu/">NEURON</a>-based models.
When choosing the model, the user is provided with two images representing the reconstructed morphology of
the neuron and an example of the simulated activity of the model, after it has
been optimized via a different set of electrophysiological features (see figure
below). Based on the neuron/activity properties the user chooses a model which will be
optimized by using the features extracted/uploaded in the previous step. The
model parameters will be optimized via the <a class="reference external" href="https://github.com/BlueBrain/BluePyOpt">BluePyOpt</a> tool through an optimization procedure
based on a genetic algorithm. For a complete reference to the BluePyOpt, please
refer to the original article at this <a class="reference external" href="https://www.frontiersin.org/articles/10.3389/fninf.2016.00017/full">link</a>.
Alternatively, the users can also upload their own model to be optimized.
This has to be appropriately formatted and compressed in a zip file.
You can download an example .zip file at the following <a class="reference download internal" download="" href="../../../../_downloads/aecb093bc2fe8691f29df7efd6094a77/example_model.zip"><code class="xref download docutils literal notranslate"><span class="pre">link</span></code></a>
(please reproduce the same folder structure in the example file, including
empty folders).</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_opt_select.png"><img alt="../../../../_images/hhnb_opt_select.png" class="align-right" src="../../../../_images/hhnb_opt_select.png" style="width: 780.0999999999999px; height: 337.56px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Before launching the optimization, the user must set the optimization
parameters by clicking the “Set parameters/Choose HPC” button of the
“Optimization settings” panel. A form is presented to the user (see image
below), to be filled in with: i) parameters concerning the genetic algorithm,
namely the maximum number of generations the user wants
to adopt as well as the number of offsprings to be considered; ii) system
parameters for the optimization run, namely the number of nodes and cores to be
reserved on the HPC system and the maximum time the process is allowed to be
running; iii) the HPC system to be used.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_hpc_param_select.png"><img alt="../../../../_images/hhnb_hpc_param_select.png" class="align-right" src="../../../../_images/hhnb_hpc_param_select.png" style="width: 342.55px; height: 432.25px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once the feature files are present in the pipeline, the model chosen and the
parameters set, the “Launch optimization” button is activated and the
optimization can be launched (see figure below).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_opt_ready.png"><img alt="../../../../_images/hhnb_opt_ready.png" class="align-right" src="../../../../_images/hhnb_opt_ready.png" style="width: 558.0px; height: 585.9px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Upon successful submission, the flag icon is changed and the submission button
deactivated to prevent a second submission with the same workflow id (see figure below).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_opt_launched_msg.png"><img alt="../../../../_images/hhnb_opt_launched_msg.png" class="align-right" src="../../../../_images/hhnb_opt_launched_msg.png" style="width: 542.7px; height: 85.5px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Both the feature and the optimization files can be removed from the pipeline
and/or downloaded by the user on his local machine through the “Delete” and “Download”
buttons respectively.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The status of the submitted jobs can be monitored via the “Single Cell
Simulation Run” panel (see next paragraph), through the “Fetch results” button.</p>
</div>
<div class="section" id="single-cell-simulation-run">
<h2>Single Cell Simulation Run<a class="headerlink" href="#single-cell-simulation-run" title="Permalink to this headline">¶</a></h2>
<p>After successful termination of the optimization phase, the optimized model can
be retrieved and used for simulations. This step is performed through the
“Single Cell Simulation Run” panel (see figure below).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_sim_ready.png"><img alt="../../../../_images/hhnb_sim_ready.png" class="align-right" src="../../../../_images/hhnb_sim_ready.png" style="width: 552.6px; height: 274.5px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The user can fetch the results from the HPC system of choice through the “Fetch
results” button which allows to select the HPC system the optimization
files reside in and, successively, select the result file of interest (see
figures below).
At the moment, only the Neuroscience Gateway HPC system can be used for running
the optimization scripts. A full description of the meaning of the job status
tags can be found under this <a class="reference external" href="http://www.nsgportal.org/guide.html#UnderstandJobStatus">link</a>.
Please note that, while the job status can be “Completed”, the outcome of the
optimization might be empty, if, for example, the optimization parameters are
not chosen appropriately (e.g. if the “Runtime” value is set so as not to allow
the optimization to come to an end).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_fetch_param.png"><img alt="../../../../_images/hhnb_fetch_param.png" class="align-right" src="../../../../_images/hhnb_fetch_param.png" style="width: 470.7px; height: 173.70000000000002px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_hpc_fetch.png"><img alt="../../../../_images/hhnb_hpc_fetch.png" class="align-right" src="../../../../_images/hhnb_hpc_fetch.png" style="width: 641.1999999999999px; height: 482.29999999999995px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Alternatively, the user can upload a <em>.zip</em> package containing the files needed for the
simulation, through the upload button. For an example of how the <em>.zip</em> file
content must be structured, please refer to the following
<a class="reference external" href="https://object.cscs.ch/v1/AUTH_c0a333ecf7c045809321ce9d9ecdfdea/hippocampus_optimization/rat/CA1/v4.0.5/optimizations/CA1_pyr_cACpyr_oh140807_A0_idG_20190328143451/CA1_pyr_cACpyr_oh140807_A0_idG_20190328143451.zip">link</a>.</p>
<p>Once the model files are integrated into the pipeline, the simulation can be run
by clicking the “Run Simulation” button. The model is fed to the “Neuron As A Service”
web-application, integrated into the neuron builder (see figure below), which
allows the user to visualize the morphology of the chosen model (both in 3D
and as a dendogram) and set the simulation run parameters.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_naas_sim.png"><img alt="../../../../_images/hhnb_naas_sim.png" class="align-right" src="../../../../_images/hhnb_naas_sim.png" style="width: 897.0px; height: 391.8px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>For further details on the “Neuron As A Service” application, please refer to
the dedicated page of this guidebook (<a class="reference internal" href="../../../single_cell_in_silico/single_cell_clamp/single_cell_clamp.html#single-cell-clamp"><span class="std std-ref">Single cell in silico experiments under current clamp</span></a>).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>Adding model to the Model Catalog</strong></p>
<p>Finally, the user can register the optimized model in the Model Catalog.
From the simulation page, after clicking on the “Register in Model Catalog”
button, a form will be displayed where the user will be able to insert the
model’s metadata (see figure below). By clicking on the “Register” button,
the registration process will be triggered, at the end of which the user will be
provided with the Model Catalog URL of the optimized model.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/hhnb_mc_params.png"><img alt="../../../../_images/hhnb_mc_params.png" class="align-right" src="../../../../_images/hhnb_mc_params.png" style="width: 733.6px; height: 511.20000000000005px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../rebuild_existing/rebuild_scm.html" class="btn btn-neutral float-right" title="Rebuild an existing single hippocampal cell model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../hippocampus.html" class="btn btn-neutral float-left" title="Hippocampus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, EBRAINS Cellular Level Simulation Interactive members.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>